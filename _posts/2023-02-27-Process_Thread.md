---
title: "[Coding_Test] Process & Thread"
excerpt: "í”„ë¡œì„¸ìŠ¤ì™€ ì“°ë ˆë“œì— ëŒ€í•œ ì„¤ëª…"

categories:
  - operating_system
tags:
  - [tag1, tag2]

permalink: /operating_system/Process_Thread/

toc: true
toc_sticky: true

date: 2023-0227
last_modified_at: 2023-02-27
---


# Process & Thread

## processë€?
> ğŸ¯Â ì‹¤í–‰íŒŒì¼(program)ì´ memoryì— ì ì¬ë˜ì–´ CPUë¥¼ í• ë‹¹ë°›ì•„ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ processë¼ í•œë‹¤. 

![](https://velog.velcdn.com/images/tlsgn8483/post/1b95d7e1-8bd7-44cd-b4ce-cea851a36635/image.png)

## Memoryì— ì ì¬
- memoryëŠ” CPUê°€ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì»´í“¨í„° ë‚´ë¶€ì˜ ê¸°ì–µì¥ì¹˜.
- programì´ CPUì—ì„œ ì‹¤í–‰ë˜ë ¤ë©´ í•´ë‹¹ ë‚´ìš©ì´ memoryì— ì ì¬ëœ ìƒíƒœì—¬ì•¼ë§Œ í•¨
- í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ë˜ëŠ” memory ê³µê°„ì€ Code, Data, Stack, Heap 4ê°œì˜ ì˜ì—­ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©°, ê° processë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ í• ë‹¹

![](https://velog.velcdn.com/images/tlsgn8483/post/07befd7f-f830-4049-a2fc-2ac32b7585dc/image.png)

| Code ì˜ì—­ | ì‹¤í–‰í•œ í”„ë¡œê·¸ë¨ì˜ ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ |
| --- | --- |
| Data ì˜ì—­ | í”„ë¡œê·¸ë¨ì˜ ì „ì—­ ë³€ìˆ˜ì™€ static ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ |
| Heap ì˜ì—­ | í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ê³µê°„ì„ í• ë‹¹(malloc)/í•´ì œ(free) í•˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ |
| Stack ì˜ì—­ | í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ìƒì„±ë˜ëŠ” ì§€ì—­ ë³€ìˆ˜ì™€ ë§¤ê°œ ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ì„ì‹œ ë©”ëª¨ë¦¬ ì˜ì—­ |

## CPUì˜ ì—°ì‚°ê³¼ PC register

- í”„ë¡œê·¸ë¨ì˜ ì½”ë“œë¥¼ í† ëŒ€ë¡œ CPUê°€ ì‹¤ì œë¡œ ì—°ì‚°ì„ í•´ì•¼ ì‹¤í–‰ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆìŒ
- ì½”ë“œ ì½ëŠ” ê²ƒì„ ì •í•˜ëŠ” ê²ƒì€, CPU ë‚´ë¶€ì— ìˆëŠ” Program Counter Registerì— ì €ì¥ë˜ì–´ ìˆìŒ.
- PC Registerì— ë‹¤ìŒì— ì‹¤í–‰ë  ì½”ë“œ ì£¼ì†Œê°’ì´ ì €ì¥ë˜ì–´ ìˆìœ¼ë©°, ìˆœì°¨ì ìœ¼ë¡œ PC Registerê°€ ê°€ë¦¬í‚¤ê²Œ ë˜ê³ , í•´ë‹¹ ëª…ë ¹ì–´ë“¤ì„ ì½ì–´ì™€ CPUê°€ ì—°ì‚°ì„ í•˜ê²Œ ë˜ë©´, í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ ë˜ëŠ” ê²ƒ. 

## Multi processë€?
- Multi processë€ 2ê°œ ì´ìƒì˜ processê°€ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ë™ì‹œì—ë¼ëŠ” ë§ì€ ë™ì‹œì„±(concurrency)ê³¼ ë³‘ë ¬ì„±(parallelism) ë‘ ê°€ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.
- ë™ì‹œì„±ì€ CPU coreê°€ 1ê°œì¼ ë•Œ, ì—¬ëŸ¬ processë¥¼ ì§§ì€ ì‹œê°„ë™ì•ˆ ë²ˆê°ˆì•„ ê°€ë©´ì„œ ì—°ì‚°ì„ í•˜ê²Œ ë˜ëŠ” ì‹œë¶„í•  ì‹œìŠ¤í…œ(time sharing system)ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒ
- ë³‘ë ¬ì„±ì€ CPU coreê°€ ì—¬ëŸ¬ê°œì¼ ë•Œ, ê°ê°ì˜ coreê°€ ê°ê°ì˜ processë¥¼ ì—°ì‚°í•¨ìœ¼ë¡œì¨ processê°€ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒ

ì˜ˆì‹œ 
> EX) ë…¸íŠ¸ë¶ ì—¬ëŸ¬ê°œì˜ CPU Core = ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì²˜ë¦¬ë˜ëŠ” ê²ƒì„ ë³‘ë ¬ì„±ì´ë¼ í•¨.
ë™ì‹œì„± = í•œê°œì˜ CPU coreì—ì„œ mulit processê°€ ì‘ë™ë˜ëŠ” ì›ë¦¬

## ë™ì‹œì„±(Concurrency) vs ë³‘ë ¬ì„±(Parallelism)
| ë™ì‹œì„± | ë³‘ë ¬ì„± |
| --- | --- |
| Single core | Multi core |
| ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒ ê°™ì•„ ë³´ì¸ë‹¤. | ì‹¤ì œë¡œ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì´ ì²˜ë¦¬ ëœë‹¤. |

## Single coreì˜ ë™ì‹œì„±
### Multi process
- M2ê°œ ì´ìƒì˜ processê°€ ë™ì‹œì— ì‹¤í–‰, ì´ ë•Œ processë“¤ì€ CPUì™€ ë©”ëª¨ë¦¬ë¥¼ ê³µìœ í•œë‹¤.
- Memory ê²½ìš°, ì—¬ëŸ¬ Processë“¤ì´ ê°ìì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì°¨ì§€í•˜ì—¬ ë™ì‹œì— ì ì¬
- í•˜ë‚˜ì˜ CPUëŠ” ë§¤ìˆœê°„ í•˜ë‚˜ì˜ Processë§Œ ì—°ì‚°í•  ìˆ˜ ìˆìœ¼ë‚˜, CPU ì²˜ë¦¬ì†ë„ê°€ ë¹¨ë¼ì„œ, ìˆ˜ ms ì´ë‚´ì˜ ì§§ì€ ì‹œê°„ë™ì•ˆ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ì´ CPUì—ì„œ ë²ˆê°ˆì•„ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì´ ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì„.
- CPUì˜ ì‘ì—…ì‹œê°„ì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì¡°ê¸ˆì”© ë‚˜ëˆ„ì–´ ì“°ëŠ” ì‹œìŠ¤í…œì„ ì‹œë¶„í•  ì‹œìŠ¤í…œì´ë¼ ë¶ˆë¦¼.

### ë©”ëª¨ë¦¬ ê´€ë¦¬
- ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ë©”ëª¨ë¦¬ì— ì ì¬ëœ ê²½ìš°, ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ì˜ì—­ì„ ì¹¨ë²”í•˜ì§€ ì•Šë„ë¡ ê° í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ ì˜ ë©”ëª¨ë¦¬ì˜ì—­ì—ë§Œ ì ‘ê·¼í•˜ë„ë¡ ìš´ì˜ì²´ì œê°€ ê´€ë¦¬.
![](https://velog.velcdn.com/images/tlsgn8483/post/5f5cb281-a13c-47e7-88ac-ac6c89dc6385/image.png)

### CPUì˜ ì—°ì‚°ê³¼ PC register
- CPUëŠ” PC(Program Counter) registerê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ì½ì–´, ì—°ì‚°ì„ ì§„í–‰í•œë‹¤.
- PC Registerì—ëŠ” ë‹¤ìŒì— ì‹¤í–‰ë  ëª…ë ¹ì–´ì˜ ì£¼ì†Œê°’ì´ ì €ì¥ë˜ì–´ ìˆìŒ.

> `ë©€í‹°í”„ë¡œì„¸ìŠ¤ ì‹œìŠ¤í…œ`ì—ì„œ Process1 ì§„í–‰ë˜ê³  ìˆì„ë•ŒëŠ” process1 code ì˜ì—­ì„ PC Registerê°€ ê°€ë¦¬í‚¤ë‹¤ê°€, Process2ê°€ ì§„í–‰ë˜ë©´ Process2ì˜ codeì˜ì—­ì„ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤. CPUëŠ” PC Registerê°€ ê°€ë¦¬í‚¤ëŠ” ê³³ì— ë”°ë¼ Processë¥¼ ë³€ê²½í•´ê°€ë©´ì„œ, ëª…ë ¹ì–´ë¥¼ ì½ì–´ë“¤ì´ê³ , ì—°ì‚°ì„ í•˜ê²Œ ëœë‹¤.

### Context
- ì‹œë¶„í•  ì‹œìŠ¤í…œì—ì„œëŠ” í•œ í”„ë¡œì„¸ìŠ¤ê°€ ë§¤ìš° ì§§ì€ ì‹œê°„ë™ì•ˆ CPUë¥¼ ì ìœ í•˜ë©´ì„œ, ì¼ì •ë¶€ë¶„ì˜ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê³ , ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë„˜ê¸´ë‹¤. ì°¨ë¡€ê°€ ë˜ë©´ ë‹¤ì‹œ CPUë¥¼ ì ìœ í•˜ì—¬, ëª…ë ¹ì„ ìˆ˜í–‰
- ì´ì „ì—ì„œ ì–´ë””ê¹Œì§€ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê³ , Registerì—ëŠ” ì–´ë–¤ ê°’ì´ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”
- í”„ë¡œì„¸ìŠ¤ê°€ í˜„ì¬ ì–´ë–¤ ìƒíƒœë¡œ ìˆ˜í–‰ë˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ `Context`
- Contextì •ë³´ë“¤ì€ PCB(Process Control Block)ì— ì €ì¥

### PCB(Process Control Block)
- ìš´ì˜ì²´ì œê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ í‘œí˜„í•œ ìë£Œêµ¬ì¡°
- í”„ë¡œì„¸ìŠ¤ì˜ ì¤‘ìš”í•œ ì •ë³´ë¥¼ í¬í•¨(ë³´í˜¸ëœ ë©”ëª¨ë¦¬ ì˜ì—­ì•ˆì— ì €ì¥)
- ì¼ë¶€ ìš´ì˜ì²´ì œ ì—ì„œëŠ” ì»¤ë„ ìŠ¤íƒì— ìœ„ì¹˜(ë³´í˜¸ë°›ìœ¼ë©´ì„œ, ì ‘ê·¼í•˜ê¸° ì‰¬ì›€)

PCBëŠ” ì•„ë˜ì™€ ê°™ì€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŒ

| PCB |  |
| --- | --- |
| Process State | new, running, waiting, halted ë“±ì˜ stateê°€ ìˆë‹¤. |
| Process Number | í•´ë‹¹ processì˜ number |
| Program counter(PC) | í•´ë‹¹ processê°€ ë‹¤ìŒì— ì‹¤í–‰í•  ëª…ë ¹ì–´ì˜ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤ |
| Registers | ì»´í“¨í„° êµ¬ì¡°ì— ë”°ë¼ ë‹¤ì–‘í•œ ìˆ˜ì™€ ìœ í˜•ì„ ê°€ì§„ register ê°’ë“¤ |
| Memory limits | base register, limit register, page table ë˜ëŠ” segment table ë“± |

![](https://velog.velcdn.com/images/tlsgn8483/post/8da8c15e-6bd1-4c09-b608-db68360789e1/image.png)

### Context switch
- Context switchë€ í•œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ CPU ì œì–´ê¶Œì„ ë„˜ê²¨ì£¼ëŠ” ê²ƒ
- ì´ì „ì˜ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ PCBì— ì €ì¥í•˜ì—¬ ë³´ê´€í•˜ê³  ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì˜ PCBë¥¼ ì½ì–´ì„œ ë³´ê´€ëœ ìƒíƒœë¥¼ ë³µêµ¬í•˜ëŠ” ì‘ì—…ì´ ì´ë£¨ì–´ì§„ë‹¤.
![](https://velog.velcdn.com/images/tlsgn8483/post/283fcb92-1de0-49db-b732-c5a4d519dc8f/image.png)


## â­â­ Multi threadë€?
- threadëŠ” í•œ process ë‚´ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë™ì‘(ê¸°ëŠ¥ function)ì˜ ë‹¨ìœ„
-  ê° threadëŠ” ì†í•´ìˆëŠ” processì˜ Stack ë©”ëª¨ë¦¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ memory ì˜ì—­ì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤
- Multi threadë€ í•˜ë‚˜ì˜ processê°€ ë™ì‹œì— ì—¬ëŸ¬ê°œì˜ ì¼ì„ ìˆ˜í–‰í• ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê²ƒ
- í•˜ë‚˜ì˜ processì—ì„œ(ì‹¤í–‰ì´ ëœ í•˜ë‚˜ì˜ programì—ì„œ) ì—¬ëŸ¬ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ multi threadë¥¼ ì‚¬ìš©í•œë‹¤.
- multi threadì—ì„œëŠ” í•œ process ë‚´ì— ì—¬ëŸ¬ ê°œì˜ threadê°€ ìˆê³ , ê° threadë“¤ì€ Stack ë©”ëª¨ë¦¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì˜ì—­(Code, Data, Heap) ì˜ì—­ì„ ê³µìœ í•œë‹¤.

> ThreadëŠ” Processë‚´ì—ì„œ ë…ë¦½ì ì¸ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤. ë…ë¦½ì ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨ì„ ì˜ë¯¸í•˜ê³ , Stack memoryê°€ ê°ì í•„ìš”í•¨. Threadê°€ ë¬´ì—‡ì¸ì§€ ì´í•´í•˜ê³ , multi proessì™€ ì–´ë–¤ì ì´ ë‹¤ë¥¸ì§€ë¥¼ ìƒê°í•´ë³´ê¸°!
ë˜í•œ, ë…ë¦½ì ì¸ stack memoryì™€ PC Registerê°€ í•„ìš”í•˜ë‹¤ëŠ” ì  ê¸°ì–µ!

### Threadì™€ multi thread
- threadëŠ” process ë‚´ì—ì„œ ë…ë¦½ì ì¸ ê¸°ëŠ¥ì„ ìˆ˜í–‰
- ê° threadëŠ” ë…ë¦½ì ì¸ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ê²ƒì€ ë…ë¦½ì ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨ì„ ì˜ë¯¸

### Stack memory &  PC register
- threadê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ì„œëŠ” ì¸ì ì „ë‹¬, Return Address ì €ì¥, í•¨ìˆ˜ ë‚´ ì§€ì—­ë³€ìˆ˜ ì €ì¥ ë“±ì„ ìœ„í•œ ë…ë¦½ì ì¸ stack memory ê³µê°„ì„ í•„ìš”
- threadëŠ” processë¡œë¶€í„° Stack memory ì˜ì—­ì€ ë…ë¦½ì ìœ¼ë¡œ í• ë‹¹ë°›ê³ , Code, Data, Heap ì˜ì—­ì€ ê³µìœ í•˜ëŠ” í˜•íƒœ
- multi threadì—ì„œëŠ” ê°ê°ì˜ threadë§ˆë‹¤ PC registerë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•œë‹¤. 
(í•œ process ë‚´ì—ì„œë„ threadë¼ë¦¬ context switchê°€ ì¼ì–´ë‚˜ê²Œ ë˜ëŠ”ë°, PC registerì— code addressê°€ ì €ì¥ë˜ì–´ ìˆì–´ì•¼ ì´ì–´ì„œ ì‹¤í–‰ì„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸)

![](https://velog.velcdn.com/images/tlsgn8483/post/db60934a-56cd-456d-b855-c4569d9d8888/image.png)


ì°¸ì¡° : [ê°œë°œë‚¨ë…¸ì”¨ ìš´ì˜ì²´ì œ]([[https://www.nossi.dev/interview/cs/dsa](https://www.inflearn.com/course/%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%85%EB%AC%B8-%ED%8C%8C%EC%9D%B4%EC%8D%AC/dashboard)](https://www.nossi.dev/interview/cs/os))
